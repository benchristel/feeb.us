<!DOCTYPE html>
<html>
  <head>
    <title>Oath Structure</title>
    <style type="text/css" rel="stylesheet">
      iframe {
        position: absolute;
        top: -1000px;
      }
    </style>
  </head>
  <body>
    <button id="pause">Pause</button>
    <button id="play">Play</button>

    <script src="//cdn.jsdelivr.net/jquery/2.1.4/jquery.min.js" type="text/javascript"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
      "use strict";

      class Player {
        constructor(options) {
          var player = this
          this.container = options.container
          this.playButton = options.play
          this.pauseButton = options.pause
          this.queue = options.queue

          var playerElementId = 'player-' + Player.instanceCount
          $('<div>').attr('id', playerElementId).appendTo($('body'))

          this.youtubePlayer = new YT.Player(
            playerElementId,
            {
              height: '390',
              width: '640',
              videoId: 'au3-hk-pXsM',
              events: {
                'onReady': function() { player.onReady() },
                'onStateChange': function(event) { player.onStateChange(event) }
              }
            }
          )
          
          this.playButton.show()
          this.pauseButton.hide()
        }

        onReady() {
          console.log('ready!')
          var player = this;

          this.playButton.click(function() {
            player.playButton.hide()
            player.pauseButton.show()
            player.youtubePlayer.playVideo()
          })

          this.pauseButton.click(function() {
            player.pauseButton.hide()
            player.playButton.show()
            player.youtubePlayer.pauseVideo()
          })
        }

        onStateChange(event) {
          console.log('changed to: '+event.data)
        }
      }

      Player.instanceCount = 0;

      var g = {}

      function onYouTubeIframeAPIReady() {
        g.player = new Player({
          container: $('body'),
          play: $('#play'),
          pause: $('#pause'),
          queue: null
        });
      }
    </script>
  </body>
</html>
